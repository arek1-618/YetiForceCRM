{"version":3,"file":"Gantt.min.js","sources":["Gantt.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\nclass Gantt {\n  /**\n   * Constructor\n   *\n   * @param {jQuery|HTMLElement|string} container\n   * @param {object} projectData\n   */\n  constructor(container, projectData) {\n    this.container = $(container);\n    this.containerParent = this.container.parent();\n    this.headerContainer = this.containerParent\n      .parent()\n      .find('.js-gantt-header')\n      .eq(0);\n    this.weekStart = 6 - CONFIG.firstDayOfWeekNos;\n    let workingDays = [1, 2, 3, 4, 5];\n    this.options = {\n      slots: {\n        header: {\n          beforeOptions: `<button class=\"btn btn-primary pb-2 mr-2 h-100 js-gantt__front-filter\"><span class=\"fas fa-filter\"></span> ${\n            LANG.JS_GANTT_FILTER\n          }</button>`\n        }\n      },\n      maxRows: 30,\n      times: {\n        timeZoom: 20\n      },\n      calendar: {\n        workingDays\n      },\n      style: {\n        'chart-expander-wrapper': {\n          'line-height': '1'\n        },\n        'chart-row-bar-polygon': {\n          stroke: '#E74C3C00',\n          'stroke-width': 0,\n          fill: '#F75C4C'\n        },\n        'chart-row-progress-bar-outline': {\n          stroke: '#E74C3C00',\n          'stroke-width': 0\n        },\n        'chart-days-highlight-rect': {\n          fill: '#f3f5f780'\n        },\n        'header-title': {\n          float: 'none',\n          display: 'inline-flex',\n          overflow: 'hidden'\n        },\n        'header-options': {\n          float: 'none',\n          display: 'inline-flex'\n        },\n        'header-title--html': {\n          'white-space': 'nowrap',\n          overflow: 'hidden',\n          'text-overflow': 'ellipsis',\n          'padding-left': '0',\n          'letter-spacing': '0'\n        },\n        'slot-header-beforeOptions': {\n          height: '100%',\n          'vertical-align': 'top'\n        }\n      },\n      title: {\n        label: LANG.JS_GANTT_TITLE,\n        html: true\n      },\n      taskList: {\n        expander: {\n          straight: false\n        },\n        columns: [\n          {\n            id: 1,\n            label: app.vtranslate('JS_NO.'),\n            html: true,\n            value: 'number',\n            width: 65\n          },\n          {\n            id: 2,\n            label: app.vtranslate('JS_NAME'),\n            html: true,\n            value: 'label',\n            width: 280,\n            expander: true\n          },\n          { id: 3, label: app.vtranslate('JS_PRIORITY'), value: 'priority_label', width: 70 },\n          { id: 3, label: app.vtranslate('JS_STATUS'), value: 'status_label', width: 80 },\n          {\n            id: 4,\n            label: app.vtranslate('JS_DAYS'),\n            value: task => {\n              return task.duration / 24 / 60 / 60;\n            },\n            width: 75,\n            style: {\n              'task-list-header-label': {\n                'text-align': 'center',\n                width: '100%'\n              },\n              'task-list-item-value-container': {\n                'text-align': 'center',\n                width: '100%'\n              }\n            }\n          },\n          {\n            id: 5,\n            label: app.vtranslate('JS_PLANNED'),\n            value: task => {\n              return task.planned_duration;\n            },\n            width: 85,\n            style: {\n              'task-list-header-label': {\n                'text-align': 'center',\n                width: '100%'\n              },\n              'task-list-item-value-container': {\n                'text-align': 'center',\n                width: '100%'\n              }\n            }\n          },\n          {\n            id: 6,\n            label: app.vtranslate('JS_REALISATION'),\n            value: 'sum_time',\n            width: 85,\n            style: {\n              'task-list-header-label': {\n                'text-align': 'center',\n                width: '100%'\n              },\n              'task-list-item-value-container': {\n                'text-align': 'center',\n                width: '100%'\n              }\n            }\n          },\n          { id: 7, label: app.vtranslate('JS_ASSIGNED', 'Project'), value: 'assigned_user_name', width: 110 },\n          {\n            id: 8,\n            label: '%',\n            value: 'progress',\n            width: 35,\n            style: {\n              'task-list-header-label': {\n                'text-align': 'center',\n                width: '100%'\n              },\n              'task-list-item-value-container': {\n                'text-align': 'center',\n                width: '100%'\n              }\n            }\n          }\n        ]\n      }\n    };\n    this.registerLanguage();\n    if (typeof projectData !== 'undefined') {\n      this.options.title.label = projectData;\n      this.loadProject(projectData);\n    }\n    this.registerEvents();\n  }\n\n  /**\n   * Register language translations globally (replace old ones)\n   */\n  registerLanguage() {\n    this.options.locale = {\n      name: CONFIG.langKey,\n      weekStart: this.weekStart,\n      weekdays: [\n        LANG.JS_SUNDAY,\n        LANG.JS_MONDAY,\n        LANG.JS_TUESDAY,\n        LANG.JS_WEDNESDAY,\n        LANG.JS_THURSDAY,\n        LANG.JS_FRIDAY,\n        LANG.JS_SATURDAY\n      ],\n      weekdaysShort: [LANG.JS_SUN, LANG.JS_MON, LANG.JS_TUE, LANG.JS_WED, LANG.JS_THU, LANG.JS_FRI, LANG.JS_SAT],\n      weekdaysMin: [LANG.JS_SUN, LANG.JS_MON, LANG.JS_TUE, LANG.JS_WED, LANG.JS_THU, LANG.JS_FRI, LANG.JS_SAT],\n      months: [\n        LANG.JS_JANUARY,\n        LANG.JS_FEBRUARY,\n        LANG.JS_MARCH,\n        LANG.JS_APRIL,\n        LANG.JS_MAY,\n        LANG.JS_JUNE,\n        LANG.JS_JULY,\n        LANG.JS_AUGUST,\n        LANG.JS_SEPTEMBER,\n        LANG.JS_NOVEMBER,\n        LANG.JS_OCTOBER,\n        LANG.JS_DECEMBER\n      ],\n      monthsShort: [\n        LANG.JS_JAN,\n        LANG.JS_FEB,\n        LANG.JS_MAR,\n        LANG.JS_APR,\n        LANG.JS_MAY,\n        LANG.JS_JUN,\n        LANG.JS_JUL,\n        LANG.JS_AUG,\n        LANG.JS_SEP,\n        LANG.JS_NOV,\n        LANG.JS_OCT,\n        LANG.JS_DEC\n      ],\n      ordinal: n => `${n}`,\n      Now: LANG.JS_GANTT_NOW,\n      'X-Scale': LANG.JS_GANTT_ZOOM_X,\n      'Y-Scale': LANG.JS_GANTT_ZOOM_Y,\n      'Task list width': LANG.JS_GANTT_TASKLIST,\n      'Before/After': LANG.JS_GANTT_EXPAND,\n      'Display task list': LANG.JS_GANTT_TASKLIST_VISIBLE\n    };\n  }\n\n  /**\n   * Filter project data\n   *\n   * @param {Object} projectData\n   * @returns {Object}\n   */\n  filterProjectData(projectData) {\n    let tasks = this.allTasks.map(task => Object.assign({}, task));\n    for (let moduleName in this.filter.status) {\n      if (this.filter.status.hasOwnProperty(moduleName)) {\n        const visibleLabels = this.filter.status[moduleName].map(status => status.label);\n        tasks = tasks.filter(task => {\n          if (task.module !== moduleName) {\n            return true;\n          }\n          if (visibleLabels.indexOf(task.status_label) >= 0) {\n            return true;\n          }\n          return false;\n        });\n      }\n    }\n    return tasks;\n  }\n\n  /**\n   * Add icons to tasks\n   * @param {array} tasks\n   * @returns {array}\n   */\n  addIcons(tasks) {\n    return tasks.map(task => {\n      let icon = 'briefcase';\n      if (task.type === 'milestone') {\n        icon = 'folder';\n      } else if (task.type === 'task') {\n        icon = 'file';\n      }\n      const iconClass = 'fas fa-' + icon;\n      task.label = `<span class=\"${iconClass} fa-lg mr-1\"></span> ${task.label}`;\n      return task;\n    });\n  }\n\n  /**\n   * Resize gantt chart\n   */\n  resize() {\n    let offsetTop = this.container.offset().top;\n    let contentHeight =\n      $('body')\n        .eq(0)\n        .height() -\n      $('.js-footer')\n        .eq(0)\n        .height();\n    let height = contentHeight - offsetTop - 100;\n    if (height < 300) {\n      height = 300;\n    }\n    this.options.maxHeight = height;\n    if (typeof this.ganttState !== 'undefined' && this.ganttState) {\n      this.ganttState.maxHeight = height;\n    }\n  }\n\n  /**\n   * Register gantt header actions\n   */\n  registerHeaderActions() {\n    this.headerContainer.find('.js-gantt-header__btn-filter').on('click', e => {\n      e.preventDefault();\n      this.showFiltersModal();\n    });\n    this.headerContainer.find('.js-gantt-header__btn-center').on('click', e => {\n      this.ganttElastic.$emit('recenterPosition');\n    });\n    this.headerContainer.find('.js-gantt-header__range-slider--x').on('input', e => {\n      this.ganttElastic.$emit('times-timeZoom-change', Number(e.target.value));\n    });\n    this.headerContainer.find('.js-gantt-header__range-slider--y').on('input', e => {\n      this.ganttElastic.$emit('row-height-change', Number(e.target.value));\n    });\n    this.headerContainer.find('.js-gantt-header__range-slider--task-list-width').on('input', e => {\n      this.ganttElastic.$emit('taskList-width-change', Number(e.target.value));\n    });\n    this.headerContainer.find('.js-gantt-header__range-slider--scope').on('input', e => {\n      this.ganttElastic.$emit('scope-change', Number(e.target.value));\n    });\n    this.headerContainer.find('.js-gantt-header__range-slider--task-list-visible').on('change', e => {\n      this.ganttState.options.taskList.display = $(e.target).is(':checked');\n    });\n    this.ganttElastic.$watch('state.taskList.display', value => {\n      this.headerContainer.find('.js-gantt-header__range-slider--task-list-visible').prop('checked', value);\n    });\n    this.headerContainer\n      .find('.js-gantt-header__range-slider--task-list-visible')\n      .prop('checked', this.ganttState.options.taskList.display ? 'checked' : false);\n  }\n\n  /**\n   * Load project\n   */\n  loadProject(projectData) {\n    this.projectData = projectData;\n    if (typeof this.projectData.tasks === 'undefined' || this.projectData.tasks.length === 0) {\n      $('.js-hide-filter').addClass('d-none');\n      $('.js-show-add-record').removeClass('d-none');\n      return;\n    } else {\n      this.allTasks = this.addIcons(this.projectData.tasks);\n    }\n    this.statuses = this.projectData.statuses;\n    this.filter = { status: this.projectData.activeStatuses };\n    this.container.closest('form').on('submit', ev => {\n      ev.preventDefault();\n      ev.stopPropagation();\n      return false;\n    });\n    this.resize();\n    const self = this;\n    if (typeof self.ganttElastic === 'undefined') {\n      this.ganttApp = GanttElastic.mount({\n        el: '#' + this.container.attr('id'),\n        tasks: this.allTasks,\n        options: this.options,\n        ready(ganttElasticInstance) {\n          self.ganttElastic = ganttElasticInstance;\n          self.ganttState = ganttElasticInstance.state;\n          self.registerHeaderActions();\n        }\n      });\n      this.container = this.containerParent.find('.gantt-elastic').eq(0);\n    } else {\n      self.ganttApp.tasks = this.allTasks;\n    }\n  }\n\n  /**\n   * Load project from ajax request\n   * @param {object} params - request params such as module/action and projectId\n   */\n  loadProjectFromAjax(params) {\n    const self = this,\n      progressInstance = jQuery.progressIndicator({\n        blockInfo: {\n          enabled: true,\n          onBlock: () => {\n            AppConnector.request(params).done(response => {\n              self.loadProject(response.result);\n              progressInstance.progressIndicator({ mode: 'hide' });\n            });\n          }\n        }\n      });\n  }\n\n  /**\n   * Load new data to gantt\n   *\n   * @param {Object} data\n   */\n  reloadData(data) {\n    this.loadProject(data);\n  }\n\n  /**\n   * Save filter and reload data.\n   *\n   * @param {Object} filterOptions\n   */\n  saveFilter(filterOptions) {\n    this.filter = filterOptions;\n    this.ganttApp.tasks = this.filterProjectData(this.projectData);\n  }\n\n  /**\n   * Get status from value (object with other props)\n   * @param {String} value\n   * @param {String} moduleName\n   * @returns {Object}\n   */\n  getStatusFromValue(value, moduleName) {\n    for (let status of this.statuses[moduleName]) {\n      if (status.value === value) {\n        return Object.assign({}, status);\n      }\n    }\n    app.errorLog(`Status not found [${value}]`);\n  }\n\n  /**\n   * Open modal with status filters\n   */\n  showFiltersModal() {\n    const self = this;\n    const box = bootbox.dialog({\n      show: 'false',\n      message: `<div class=\"js-gantt__filter-modal form\" data-js=\"container\">\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t<label>${app.vtranslate('JS_PROJECT_STATUSES', 'Project')}:</label>\n\t\t\t\t\t<select class=\"select2 form-control\" id=\"js-gantt__filter-project\" multiple>\n\t\t\t\t\t\t${self.statuses.Project.map(status => {\n              return `<option value=\"${status.value}\" ${\n                this.filter.status.Project.map(status => status.value).indexOf(status.value) >= 0 ? 'selected' : ''\n              }>${status.label}</option>`;\n            })}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t<label>${app.vtranslate('JS_MILESTONE_STATUSES', 'Project')}:</label>\n\t\t\t\t\t<select class=\"select2 form-control\" id=\"js-gantt__filter-milestone\" multiple>\n\t\t\t\t\t\t${self.statuses.ProjectMilestone.map(status => {\n              return `<option value=\"${status.value}\" ${\n                this.filter.status.ProjectMilestone.map(status => status.value).indexOf(status.value) >= 0\n                  ? 'selected'\n                  : ''\n              }>${status.label}</option>`;\n            })}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form-group\">\n\t\t\t\t<label>${app.vtranslate('JS_TASK_STATUSES', 'Project')}:</label>\n\t\t\t\t\t<select class=\"select2 form-control\" id=\"js-gantt__filter-task\" multiple>\n\t\t\t\t\t\t${self.statuses.ProjectTask.map(status => {\n              return `<option value=\"${status.value}\" ${\n                this.filter.status.ProjectTask.map(status => status.value).indexOf(status.value) >= 0 ? 'selected' : ''\n              }>${status.label}</option>`;\n            })}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>`,\n      title: '<span class=\"fas fa-filter\"></span> ' + app.vtranslate('JS_FILTER_BY_STATUSES', 'Project'),\n      buttons: {\n        success: {\n          label: '<span class=\"fas fa-check mr-1\"></span>' + app.vtranslate('JS_UPDATE_GANTT', 'Project'),\n          className: 'btn-success',\n          callback: function() {\n            self.saveFilter({\n              status: {\n                Project: $('#js-gantt__filter-project', this)\n                  .val()\n                  .map(status => {\n                    return self.getStatusFromValue(status, 'Project');\n                  }),\n                ProjectMilestone: $('#js-gantt__filter-milestone', this)\n                  .val()\n                  .map(status => {\n                    return self.getStatusFromValue(status, 'ProjectMilestone');\n                  }),\n                ProjectTask: $('#js-gantt__filter-task', this)\n                  .val()\n                  .map(status => {\n                    return self.getStatusFromValue(status, 'ProjectTask');\n                  })\n              }\n            });\n          }\n        },\n        danger: {\n          label: '<span class=\"fas fa-times mr-1\"></span>' + app.vtranslate('JS_CANCEL'),\n          className: 'btn-danger',\n          callback: function() {}\n        }\n      }\n    });\n    App.Fields.Picklist.showSelect2ElementView($(box).find('.select2'));\n    box.show();\n  }\n\n  /**\n   * Register events for gantt actions in current container\n   */\n  registerEvents() {\n    const container = this.container;\n    container.find('[data-toggle=\"tooltip\"]').tooltip();\n    window.addEventListener('resize', () => {\n      this.resize();\n    });\n  }\n}\n"],"names":["container","projectData","$","containerParent","parent","headerContainer","find","eq","weekStart","CONFIG","firstDayOfWeekNos","options","slots","header","beforeOptions","LANG","JS_GANTT_FILTER","maxRows","times","timeZoom","calendar","workingDays","style","stroke","fill","float","display","overflow","height","title","label","JS_GANTT_TITLE","html","taskList","expander","straight","columns","id","app","vtranslate","value","width","duration","planned_duration","registerLanguage","loadProject","registerEvents","locale","name","langKey","weekdays","JS_SUNDAY","JS_MONDAY","JS_TUESDAY","JS_WEDNESDAY","JS_THURSDAY","JS_FRIDAY","JS_SATURDAY","weekdaysShort","JS_SUN","JS_MON","JS_TUE","JS_WED","JS_THU","JS_FRI","JS_SAT","weekdaysMin","months","JS_JANUARY","JS_FEBRUARY","JS_MARCH","JS_APRIL","JS_MAY","JS_JUNE","JS_JULY","JS_AUGUST","JS_SEPTEMBER","JS_NOVEMBER","JS_OCTOBER","JS_DECEMBER","monthsShort","JS_JAN","JS_FEB","JS_MAR","JS_APR","JS_JUN","JS_JUL","JS_AUG","JS_SEP","JS_NOV","JS_OCT","JS_DEC","ordinal","n","Now","JS_GANTT_NOW","JS_GANTT_ZOOM_X","JS_GANTT_ZOOM_Y","JS_GANTT_TASKLIST","JS_GANTT_EXPAND","JS_GANTT_TASKLIST_VISIBLE","tasks","allTasks","map","assign","task","moduleName","filter","status","hasOwnProperty","module","indexOf","status_label","type","icon","iconClass","offset","top","contentHeight","offsetTop","maxHeight","ganttState","on","e","preventDefault","showFiltersModal","ganttElastic","$emit","Number","target","is","$watch","prop","length","addClass","removeClass","addIcons","statuses","activeStatuses","closest","ev","stopPropagation","resize","ganttApp","GanttElastic","mount","el","attr","ready","ganttElasticInstance","self","state","registerHeaderActions","params","progressInstance","jQuery","progressIndicator","blockInfo","enabled","onBlock","AppConnector","request","done","response","result","mode","data","filterOptions","filterProjectData","errorLog","box","bootbox","dialog","show","message","Project","ProjectMilestone","ProjectTask","buttons","success","className","callback","saveFilter","val","getStatusFromValue","danger","App","Fields","Picklist","showSelect2ElementView","tooltip","window","addEventListener"],"mappings":"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"}