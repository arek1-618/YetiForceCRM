{"version":3,"file":"RegistrationOnlineModal.min.js","sources":["RegistrationOnlineModal.js"],"sourcesContent":["/* {[The file is published on the basis of YetiForce Public License 3.0 that can be found in the following directory: licenses/LicenseEN.txt or yetiforce.com]} */\n'use strict';\n\njQuery.Class('Settings_YetiForce_RegistrationOnlineModal_Js', {\n\t/**\n\t * Register events for form checkbox element\n\t */\n\tregisterNewsletter() {\n\t\tconst form = $('[data-view=\"RegistrationOnlineModal\"]').find('form');\n\t\tform.find('[id$=\"newsletter]\"]').on('click', (e) => {\n\t\t\tlet inputsContainer = $(e.target).closest('.js-card-body');\n\t\t\tif ($(e.target).prop('checked')) {\n\t\t\t\tinputsContainer.find('[id$=\"firstname]\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\tinputsContainer.find('[id$=\"lastname]\"]').attr('data-validation-engine', 'validate[required]');\n\t\t\t\tinputsContainer.find('[id$=\"email]\"]').attr('data-validation-engine', 'validate[required,custom[email]]');\n\t\t\t\tinputsContainer.find('.js-newsletter-content').removeClass('d-none');\n\t\t\t} else {\n\t\t\t\tinputsContainer.find('[id$=\"firstname]\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\tinputsContainer.find('[id$=\"lastname]\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\tinputsContainer.find('[id$=\"email]\"]').removeAttr('data-validation-engine').val('');\n\t\t\t\tinputsContainer.find('.js-newsletter-content').addClass('d-none');\n\t\t\t}\n\t\t});\n\t},\n\tregisterEvents() {\n\t\tconst container = $(\"[data-view='RegistrationOnlineModal']\");\n\t\tconst form = container.find('form');\n\t\tform.validationEngine(app.validationEngineOptions);\n\t\tform.on('submit', function (e) {\n\t\t\te.preventDefault();\n\t\t\tcontainer.find('[name=\"saveButton\"]').click();\n\t\t});\n\t\tcontainer.find('[name=\"saveButton\"]').on('click', function (e) {\n\t\t\tif (!form.validationEngine('validate')) {\n\t\t\t\te.preventDefault();\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: app.vtranslate('JS_ENTER_ALL_REGISTRATION_DATA'),\n\t\t\t\t\ttype: 'error'\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tcontainer.find('button[name=saveButton]').prop(\"disabled\", true);\n\t\t\tlet progress = $.progressIndicator({\n\t\t\t\t'message': app.vtranslate('JS_LOADING_PLEASE_WAIT'),\n\t\t\t\t'blockInfo': {\n\t\t\t\t\t'enabled': true\n\t\t\t\t}\n\t\t\t});\n\t\t\tAppConnector.request(form.serializeFormData()).done(function (data) {\n\t\t\t\tVtiger_Helper_Js.showPnotify({\n\t\t\t\t\ttext: data['result']['message'],\n\t\t\t\t\ttype: data['result']['type']\n\t\t\t\t});\n\t\t\t\tprogress.progressIndicator({'mode': 'hide'});\n\t\t\t\tif (data['result']['type'] === 'success') {\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t}\n\t\t\t\tcontainer.find('button[name=saveButton]').prop(\"disabled\", false);\n\t\t\t\treturn data['result'];\n\t\t\t});\n\t\t});\n\t\tthis.registerNewsletter();\n\t}\n}, {});\nSettings_YetiForce_RegistrationOnlineModal_Js.registerEvents();\n"],"names":["jQuery","Class","registerNewsletter","$","find","form","on","e","target","closest","prop","inputsContainer","attr","removeClass","removeAttr","val","addClass","registerEvents","container","validationEngine","app","validationEngineOptions","preventDefault","click","Vtiger_Helper_Js","showPnotify","text","vtranslate","type","progressIndicator","AppConnector","request","serializeFormData","done","data","progress","hideModalWindow","Settings_YetiForce_RegistrationOnlineModal_Js"],"mappings":"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"}