{"version":3,"file":"AdvanceSearch.min.js","sources":["AdvanceSearch.js"],"sourcesContent":["/*+***********************************************************************************\n * The contents of this file are subject to the vtiger CRM Public License Version 1.0\n * (\"License\"); You may not use this file except in compliance with the License\n * The Original Code is:  vtiger CRM Open Source\n * The Initial Developer of the Original Code is vtiger.\n * Portions created by vtiger are Copyright (C) vtiger.\n * All Rights Reserved.\n * Contributor(s): YetiForce.com\n *************************************************************************************/\n'use strict';\n\nVtiger_BasicSearch_Js(\n\t'Vtiger_AdvanceSearch_Js',\n\t{\n\t\t//cache will store the search data\n\t\tcache: {}\n\t},\n\t{\n\t\t//container which will store the search elements\n\t\telementContainer: false,\n\t\t//instance which represents advance filter\n\t\tadvanceFilter: false,\n\t\t//states whether the validation is registred for filter elements\n\t\tfilterValidationRegistered: false,\n\t\t//contains the filter form element\n\t\tfilterForm: false,\n\t\t//container which will store the parent elements\n\t\tparentContainer: false,\n\t\t/**\n\t\t * Function which will give the container\n\t\t */\n\t\tgetContainer: function() {\n\t\t\treturn this.elementContainer;\n\t\t},\n\t\t/**\n\t\t *Function which is used to set the continaer\n\t\t *@params : container - element which represent the container\n\t\t *@return current instance\n\t\t */\n\t\tsetContainer: function(container) {\n\t\t\tthis.elementContainer = container;\n\t\t\treturn this;\n\t\t},\n\t\t/**\n\t\t * Function which will give the parent container\n\t\t */\n\t\tgetParentContainer: function() {\n\t\t\treturn this.parentContainer;\n\t\t},\n\t\t/**\n\t\t *Function which is used to set the continaer\n\t\t *@params : container - element which represent the container\n\t\t *@return current instance\n\t\t */\n\t\tsetParentContainer: function(container) {\n\t\t\tthis.setMainContainer(container);\n\t\t\tthis.parentContainer = container;\n\t\t\treturn this;\n\t\t},\n\t\tgetFilterForm: function() {\n\t\t\treturn $('form[name=\"advanceFilterForm\"]', this.getContainer());\n\t\t},\n\t\t/**\n\t\t * Function used to get the advance search ui\n\t\t * @return : deferred promise\n\t\t */\n\t\tgetAdvanceSearch: function() {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar searchModule = this.getSearchModule();\n\t\t\t//Exists in the cache\n\t\t\tif (searchModule in Vtiger_AdvanceSearch_Js.cache) {\n\t\t\t\taDeferred.resolve(Vtiger_AdvanceSearch_Js.cache[searchModule]);\n\t\t\t\treturn aDeferred.promise();\n\t\t\t}\n\t\t\tvar searchableModulesParams = {\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tsearchModule: searchModule,\n\t\t\t\tview: 'BasicAjax',\n\t\t\t\tmode: 'showAdvancedSearch'\n\t\t\t};\n\t\t\tif (app.getParentModuleName()) {\n\t\t\t\tsearchableModulesParams.parent = app.getParentModuleName();\n\t\t\t}\n\t\t\tvar progressInstance = $.progressIndicator();\n\t\t\tAppConnector.request(searchableModulesParams)\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tprogressInstance.hide();\n\t\t\t\t\t//add to cache\n\t\t\t\t\tVtiger_AdvanceSearch_Js.cache[searchModule] = data;\n\t\t\t\t\taDeferred.resolve(data);\n\t\t\t\t})\n\t\t\t\t.fail(function(error, err) {\n\t\t\t\t\taDeferred.reject(error);\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function which intializes search\n\t\t */\n\t\tinitiateSearch: function() {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar thisInstance = this;\n\t\t\tvar postLoad = function(uiData) {\n\t\t\t\tthisInstance.setContainer($('#advanceSearchContainer'));\n\t\t\t\tthisInstance.filterValidationRegistered = false;\n\t\t\t\tthisInstance.registerEvents();\n\t\t\t\tthisInstance.advanceFilter = new Vtiger_SearchAdvanceFilter_Js($('.filterContainer', uiData));\n\t\t\t\taDeferred.resolve();\n\t\t\t};\n\t\t\tthisInstance\n\t\t\t\t.getAdvanceSearch()\n\t\t\t\t.done(function(data) {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams.data = data;\n\t\t\t\t\tparams.cb = postLoad;\n\t\t\t\t\tapp.hideModalWindow();\n\t\t\t\t\tapp.showModalWindow(params);\n\t\t\t\t})\n\t\t\t\t.fail(function(error) {\n\t\t\t\t\taDeferred.reject();\n\t\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\tgetNameFields: function() {\n\t\t\tvar form = this.getFilterForm();\n\t\t\treturn form.find('[name=\"labelFields\"]').data('value');\n\t\t},\n\t\tselectBasicSearchValue: function() {\n\t\t\tvar parent = this.getParentContainer();\n\t\t\tif (parent == false) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar value = parent.find('.js-global-search__value').val();\n\t\t\tif (value.length > 0) {\n\t\t\t\tvar form = this.getFilterForm();\n\t\t\t\tvar labelFieldList = this.getNameFields();\n\t\t\t\tif (typeof labelFieldList === 'undefined' || labelFieldList == null || labelFieldList.length == 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar anyConditionContainer = form.find('.anyConditionContainer');\n\t\t\t\tfor (var index in labelFieldList) {\n\t\t\t\t\tvar labelFieldName = labelFieldList[index];\n\t\t\t\t\tif (index != 0) {\n\t\t\t\t\t\t//By default one condition exits , only if you have multiple label fields you have add one more condition\n\t\t\t\t\t\tanyConditionContainer\n\t\t\t\t\t\t\t.find('.addCondition')\n\t\t\t\t\t\t\t.find('button')\n\t\t\t\t\t\t\t.trigger('click');\n\t\t\t\t\t}\n\t\t\t\t\tvar conditionRow = anyConditionContainer.find('.conditionList').find('.js-conditions-row:last');\n\t\t\t\t\tvar fieldSelectElemnt = conditionRow.find('select[name=\"columnname\"]');\n\t\t\t\t\tfieldSelectElemnt.find('option[data-field-name=\"' + labelFieldName + '\"]').attr('selected', 'selected');\n\t\t\t\t\tfieldSelectElemnt.trigger('change').trigger('change');\n\n\t\t\t\t\tvar comparatorSelectElemnt = conditionRow.find('select[name=\"comparator\"]');\n\t\t\t\t\t//select the contains value\n\t\t\t\t\tcomparatorSelectElemnt.find('option[value=\"c\"]').attr('selected', 'selected');\n\t\t\t\t\tcomparatorSelectElemnt.trigger('change');\n\n\t\t\t\t\tvar valueElement = conditionRow.find('[name=\"value\"]');\n\t\t\t\t\tvalueElement.val(value);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * Function which invokes search\n\t\t */\n\t\tsearch: function() {\n\t\t\tvar conditionValues = this.advanceFilter.getValues();\n\t\t\tvar module = this.getSearchModule();\n\t\t\treturn this._search({\n\t\t\t\tmodule: app.getModuleName(),\n\t\t\t\tsearchModule: module,\n\t\t\t\tadvfilterlist: JSON.stringify(conditionValues)\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which shows search results in proper manner\n\t\t * @params : data to be shown\n\t\t */\n\t\tshowSearchResults: function(data) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tvar postLoad = function(data) {\n\t\t\t\t//app.showScrollBar($(data).find('.contents'));\n\t\t\t\taDeferred.resolve(data);\n\t\t\t};\n\t\t\tvar html =\n\t\t\t\t'<div class=\"row\">' +\n\t\t\t\t'<span class=\"col-md-4 searchHolder\"></span>' +\n\t\t\t\t'<span class=\"col-md-8 filterHolder marginLeftZero d-none\"></span>' +\n\t\t\t\t'</div>';\n\t\t\tvar jQhtml = $(html);\n\t\t\t$('.searchHolder', jQhtml).html(data);\n\n\t\t\tdata = jQhtml;\n\n\t\t\tvar params = {};\n\t\t\tparams.data = data;\n\t\t\tparams.cb = postLoad;\n\t\t\tapp.showModalWindow(params);\n\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function which will save the filter\n\t\t */\n\t\tsaveFilter: function(params) {\n\t\t\tvar aDeferred = $.Deferred();\n\t\t\tparams.source_module = this.getSearchModule();\n\t\t\tparams.status = 1;\n\t\t\tparams.advfilterlist = JSON.stringify(this.advanceFilter.getValues(false));\n\n\t\t\tparams.module = 'CustomView';\n\t\t\tparams.action = 'Save';\n\n\t\t\tAppConnector.request(params).done(function(data) {\n\t\t\t\tif (!data.success) {\n\t\t\t\t\tvar params = {\n\t\t\t\t\t\ttitle: app.vtranslate('JS_MESSAGE'),\n\t\t\t\t\t\ttext: data.error.message,\n\t\t\t\t\t\ttype: 'error'\n\t\t\t\t\t};\n\t\t\t\t\tVtiger_Helper_Js.showPnotify(params);\n\t\t\t\t}\n\t\t\t\taDeferred.resolve(data);\n\t\t\t});\n\t\t\treturn aDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function which will save the filter and show the list view of new custom view\n\t\t */\n\t\tsaveAndViewFilter: function(params) {\n\t\t\tthis.saveFilter(params).done(\n\t\t\t\tfunction(response) {\n\t\t\t\t\tvar url = response['result']['listviewurl'];\n\t\t\t\t\twindow.location.href = url;\n\t\t\t\t},\n\t\t\t\tfunction(error) {}\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * Function which specify whether the search component and filter component both are shown\n\t\t */\n\t\tisSearchAndFilterComponentsShown: function() {\n\t\t\tvar modalData = $('#' + Window.lastModalId);\n\t\t\tvar filterComponent = $('.filterHolder', modalData).find('#advanceSearchContainer');\n\t\t\tif (filterComponent.length <= 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\t/**\n\t\t * Function which will perform search and other operaions\n\t\t */\n\t\tperformSearch: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar isSearchResultsAndFilterShown = this.isSearchAndFilterComponentsShown();\n\t\t\tthis.search().done(function(data) {\n\t\t\t\tthisInstance.setContainer(thisInstance.getContainer().detach());\n\t\t\t\tthisInstance.showSearchResults(data).done(function(modalBlock) {\n\t\t\t\t\tthisInstance.registerShowFiler();\n\t\t\t\t\t//if the filter already shown , show again\n\t\t\t\t\tif (isSearchResultsAndFilterShown) {\n\t\t\t\t\t\tthisInstance.showFilter();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will show the advance filter next to search results\n\t\t */\n\t\tshowFilter: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar callback = function() {\n\t\t\t\tapp.showModalWindow(thisInstance.getContainer());\n\t\t\t};\n\t\t\tapp.hideModalWindow(callback);\n\t\t},\n\t\t/**\n\t\t * Function which will perform the validation for the advance filter fields\n\t\t * @return : deferred promise - resolves if validation succeded if not failure\n\t\t */\n\t\tperformValidation: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tthis.formValidationDeferred = $.Deferred();\n\t\t\tvar controlForm = this.getFilterForm();\n\n\t\t\tvar validationDone = function(form, status) {\n\t\t\t\tif (status) {\n\t\t\t\t\tthisInstance.formValidationDeferred.resolve();\n\t\t\t\t} else {\n\t\t\t\t\tthisInstance.formValidationDeferred.reject();\n\t\t\t\t}\n\t\t\t};\n\t\t\t//To perform validation registration only once\n\t\t\tif (!this.filterValidationRegistered) {\n\t\t\t\tthis.filterValidationRegistered = true;\n\t\t\t\tcontrolForm.validationEngine({\n\t\t\t\t\tonValidationComplete: validationDone\n\t\t\t\t});\n\t\t\t}\n\t\t\t//This will trigger the validation\n\t\t\tcontrolForm.submit();\n\t\t\treturn this.formValidationDeferred.promise();\n\t\t},\n\t\t/**\n\t\t * Function which will register the show filer invocation\n\t\t */\n\t\tregisterShowFiler: function() {\n\t\t\tvar thisInstance = this;\n\t\t\t$('#showFilter').on('click', function(e) {\n\t\t\t\tthisInstance.showFilter();\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * Function which will register events\n\t\t */\n\t\tregisterEvents: function() {\n\t\t\tvar thisInstance = this;\n\t\t\tvar container = this.getContainer();\n\n\t\t\tcontainer.on('change', '#searchModuleList', function(e) {\n\t\t\t\tvar selectElement = $(e.currentTarget);\n\t\t\t\tvar selectedModuleName = selectElement.val();\n\t\t\t\tthisInstance.setSearchModule(selectedModuleName);\n\t\t\t\tthisInstance.initiateSearch().done(function() {\n\t\t\t\t\tthisInstance.selectBasicSearchValue();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$('#advanceSearchButton').on('click', function(e) {\n\t\t\t\tvar searchModule = thisInstance.getSearchModule();\n\t\t\t\t//If no module is selected\n\t\t\t\tif (searchModule.length <= 0) {\n\t\t\t\t\tapp\n\t\t\t\t\t\t.getChosenElementFromSelect($('#searchModuleList'))\n\t\t\t\t\t\t.validationEngine('showPrompt', app.vtranslate('JS_SELECT_MODULE'), 'error', 'topRight', true);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthisInstance\n\t\t\t\t\t.performValidation()\n\t\t\t\t\t.done(function() {\n\t\t\t\t\t\tthisInstance.performSearch();\n\t\t\t\t\t})\n\t\t\t\t\t.fail(function() {});\n\t\t\t});\n\n\t\t\t$('#advanceIntiateSave').on('click', function(e) {\n\t\t\t\tvar currentElement = $(e.currentTarget);\n\t\t\t\tcurrentElement.addClass('d-none');\n\t\t\t\tvar actionsContainer = currentElement.closest('.actions');\n\t\t\t\t$('.js-name-filter', actionsContainer)\n\t\t\t\t\t.removeClass('d-none')\n\t\t\t\t\t.focus();\n\t\t\t\t$('#advanceSave').removeClass('d-none');\n\t\t\t});\n\n\t\t\t$('#advanceSave').on('click', function(e) {\n\t\t\t\tvar actionsContainer = $(e.currentTarget).closest('.actions');\n\t\t\t\tvar filterNameField = $('input[name=\"viewname\"]', actionsContainer);\n\t\t\t\tvar value = filterNameField.val();\n\t\t\t\tif (value.length <= 0) {\n\t\t\t\t\tfilterNameField.validationEngine(\n\t\t\t\t\t\t'showPrompt',\n\t\t\t\t\t\tapp.vtranslate('JS_REQUIRED_FIELD'),\n\t\t\t\t\t\t'error',\n\t\t\t\t\t\t'topRight',\n\t\t\t\t\t\ttrue\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar searchModule = thisInstance.getSearchModule();\n\t\t\t\t//If no module is selected\n\t\t\t\tif (searchModule.length <= 0) {\n\t\t\t\t\tapp\n\t\t\t\t\t\t.getChosenElementFromSelect($('#searchModuleList'))\n\t\t\t\t\t\t.validationEngine('showPrompt', app.vtranslate('JS_SELECT_MODULE'), 'error', 'topRight', true);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthisInstance.performValidation().done(function() {\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams.viewname = value;\n\t\t\t\t\tthisInstance.saveAndViewFilter(params);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t//DO nothing on submit of filter form\n\t\t\tthis.getFilterForm().on('submit', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t});\n\n\t\t\t//To set the search module with the currently selected values.\n\t\t\tthis.setSearchModule($('#searchModuleList').val());\n\t\t}\n\t}\n);\n"],"names":["Vtiger_BasicSearch_Js","cache","elementContainer","advanceFilter","filterValidationRegistered","filterForm","parentContainer","getContainer","setContainer","container","getParentContainer","setParentContainer","setMainContainer","getFilterForm","getAdvanceSearch","$","Deferred","searchModule","getSearchModule","resolve","Vtiger_AdvanceSearch_Js","aDeferred","promise","module","app","getModuleName","view","mode","getParentModuleName","searchableModulesParams","parent","progressIndicator","request","done","data","progressInstance","hide","fail","error","reject","initiateSearch","thisInstance","postLoad","uiData","registerEvents","params","cb","hideModalWindow","showModalWindow","getNameFields","find","selectBasicSearchValue","val","length","labelFieldList","form","index","anyConditionContainer","trigger","fieldSelectElemnt","conditionRow","labelFieldName","attr","comparatorSelectElemnt","valueElement","value","search","getValues","_search","advfilterlist","JSON","stringify","conditionValues","showSearchResults","jQhtml","html","saveFilter","source_module","status","action","AppConnector","success","title","vtranslate","text","message","type","Vtiger_Helper_Js","showPnotify","saveAndViewFilter","response","window","location","href","url","isSearchAndFilterComponentsShown","Window","lastModalId","filterComponent","modalData","performSearch","isSearchResultsAndFilterShown","detach","registerShowFiler","showFilter","performValidation","formValidationDeferred","controlForm","validationEngine","onValidationComplete","submit","on","e","currentTarget","selectedModuleName","selectElement","setSearchModule","getChosenElementFromSelect","currentElement","addClass","closest","actionsContainer","removeClass","focus","filterNameField","viewname","preventDefault"],"mappings":"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"}